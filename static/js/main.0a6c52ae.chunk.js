(this["webpackJsonptrello-clone"]=this["webpackJsonptrello-clone"]||[]).push([[0],{137:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),o=n.n(r),c=n(18),i=n.n(c),d=n(11),l=n(12),s=n(39),u=n(24),p=n(23),f=n(55),b=n.n(f);n(100);b.a.initializeApp({apiKey:"AIzaSyBacJ_KKJSLLjgfSicFdtCDNPrPSNM9Pa0",authDomain:"trello-clone-e04bd.firebaseapp.com",databaseURL:"https://trello-clone-e04bd.firebaseio.com",projectId:"trello-clone-e04bd",storageBucket:"trello-clone-e04bd.appspot.com",messagingSenderId:"339754565110",appId:"1:339754565110:web:08f0168aff109bc09e5bd7",measurementId:"G-L5YDB5K7CS"});var h=b.a.database(),v=function(e){var t=Date.now();h.ref("/".concat(t)).set({title:e,id:t,cards:null})},m=function(e,t){var n=Date.now();return h.ref("/".concat(e,"/cards/").concat(n)).set({id:n,text:t}),{id:n,text:t}};var g=function(e,t,n,a,r){var o;return h.ref("/").once("value",(function(r){var c=r.val(),i=(Object.values(c),c[e]),d=c[t];if(i.cards){var l=Object.values(i.cards);i.cards=l}else i.cards=[];if(d.cards){var s=Object.values(d.cards);d.cards=s}else d.cards=[];var u=i.cards[n];h.ref("/".concat(i.id,"/cards/").concat(u.id)).remove(),i.cards.splice(n,1),o=Date.now(),u.id=o,h.ref("/".concat(d.id,"/cards/").concat(o)).set(u),d.cards.push(u);for(var p=a+1;p<d.cards.length;p++)h.ref("/".concat(d.id,"/cards/").concat(d.cards[p].id)).update({text:d.cards[p-1].text}),console.log(d.cards);h.ref("/".concat(d.id,"/cards/").concat(d.cards[a].id)).update({text:u.text})})),o};var E=h,x=function(e){return console.log(E),{type:j.ADD_LIST_DATABASE,payload:e}},D=function(e){return{type:j.FETCH_LISTS,payload:e}};var y=function(e){return{type:j.DELETE_LIST,payload:e}},O=function(e,t,n,a,r,o,c){return console.log("heyy"),{type:j.DRAG_HAPPENED,payload:{droppableIdStart:e,droppableIdEnd:t,droppableIndexStart:n,droppableIndexEnd:a,draggableId:r,type:o,newCardId:c}}},I=function(e,t){return{type:j.ADD_CARD,payload:{card:t,listID:e}}},j={ADD_CARD:"ADD_CARD",ADD_LIST_DATABASE:"ADD_LIST_DATABASE",DRAG_HAPPENED:"DRAG_HAPPENED",FETCH_LISTS:"FETCH_LISTS",DELETE_CARD:"DELETE_CARD",DELETE_LIST:"DELETE_LIST",EDIT_LIST_TITLE:"EDIT_LIST_TITLE",EDIT_CARD:"EDIT_CARD"},A=("list-".concat(0),"card-".concat(0),"card-".concat(1),"list-".concat(1),"card-".concat(2),"card-".concat(3),"card-".concat(4),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.ADD_CARD:var n={id:t.payload.card.id,text:t.payload.card.text},a=e.map((function(e){return e.id===t.payload.listID?Object(p.a)({},e,{cards:[].concat(Object(u.a)(e.cards),[n])}):e}));return a;case j.DRAG_HAPPENED:var r,o=t.payload,c=o.droppableIdStart,i=o.droppableIdEnd,d=o.droppableIndexStart,l=o.droppableIndexEnd,s=(o.draggableId,o.type),f=Object(u.a)(e);if("list"===s){var b=f.splice(d,1);f.splice.apply(f,[l,0].concat(Object(u.a)(b)));var h=f[d].id;return f[d].id=f[l].id,f[l].id=h,f}for(var v=0;v<e.length;v++)if(e[v].id==c){r=f[v];break}var m,g=r.cards.splice(d,1);(g=g[0]).id=t.payload.newCardId;for(v=0;v<e.length;v++)if(e[v].id==i){m=f[v];break}m.cards.push({id:t.payload.newCardId,text:""});for(v=m.cards.length-1;v>l;v--)m.cards[v].text=m.cards[v-1].text;return m.cards[l].text=g.text,f;case j.FETCH_LISTS:return t.payload;case j.ADD_LIST_DATABASE:var E={title:t.payload.title,cards:[],id:t.payload.id};return[].concat(Object(u.a)(e),[E]);case j.DELETE_CARD:var x,D,y=e.map((function(e,n){return e.id===t.payload.listID&&(D=e,x=n),e}));y.splice(x,1);var O=[];for(v=0;v<D.cards.length;v++)D.cards[v].id!==t.payload.cardId&&O.push(D.cards[v]);var I={title:D.title,id:D.id,cards:O};return y.splice(x,0,I),y;case j.DELETE_LIST:var A,S=e.map((function(e,n){return e.id===t.payload&&(A=n),e}));return S.splice(A,1),S;case j.EDIT_LIST_TITLE:var C=e.map((function(e,n){return e.id===t.payload.listID?Object(p.a)({},e,{title:t.payload.listTitle}):e}));return C;case j.EDIT_CARD:var T=e.map((function(e){return e.id===t.payload.listID?Object(p.a)({},e,{cards:e.cards.map((function(e){return e.id===t.payload.cardId?Object(p.a)({},e,{text:t.payload.cardText}):e}))}):e}));return T;default:return e}}),S=Object(l.c)({lists:A}),C=Object(l.e)(S,Object(l.a)(s.a)),T=n(32),w=n(19),_=n(33),L=n(34),k=n(35),F=n(36),R=n(156),B=n(154),P=n(153),H=n(26),G=n(6),z=n(152),M=n(155);function N(){var e=Object(a.a)(["\n  && {\n    color: white;\n    background: #5aac44;\n  }\n"]);return N=function(){return e},e}var J=Object(G.b)(M.a)(N()),K=function(e){var t=e.children,n=e.onClick;return o.a.createElement(J,{variant:"contained",onMouseDown:n},t)},W=n(50);function U(){var e=Object(a.a)(["\nmargin-left: 8px;\ncursor: pointer;\n"]);return U=function(){return e},e}function Y(){var e=Object(a.a)(["\nmargin-top: 8px;\ndisplay: flex;\nalign-items: center;\nmargin-left: 8px;\n"]);return Y=function(){return e},e}function $(){var e=Object(a.a)(["\nresize: none;\nmax-width: 100%;\noverflow: hidden;\noutline: none;\nborder: none;\n"]);return $=function(){return e},e}function q(){var e=Object(a.a)(["\nmin-height: 85px;\npadding: 6px 8px 2px;\n"]);return q=function(){return e},e}function Q(){var e=Object(a.a)(["\nwidth: 284px;\nmargin-bottom: 8px;\n"]);return Q=function(){return e},e}var V=G.b.div(Q()),X=Object(G.b)(R.a)(q()),Z=Object(G.b)(W.a)($()),ee=G.b.div(Y()),te=Object(G.b)(z.a)(U()),ne=o.a.memo((function(e){var t=e.list,n=e.text,a=e.onChange,r=e.closeForm,c=e.children,i=t?"Enter list title...":"Enter a title for this card...";return o.a.createElement(V,null,o.a.createElement(X,null,o.a.createElement(Z,{placeholder:i,autoFocus:!0,value:n,onChange:function(e){return a(e)},onBlur:r})),o.a.createElement(ee,null,c,o.a.createElement(te,{onMouseDown:r},"close")))}));function ae(){var e=Object(a.a)(["\n  position: absolute;\n  display: none;\n  right: 5px;\n  top: 5px;\n  opacity: 0.5;\n  ",":hover & {\n    display: block;\n    cursor: pointer;\n  }\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(a.a)(["\n    position: absolute;\n    display:none;\n    right: 5px;\n    bottom: 5px;\n    opacity: 0.5;\n    ",":hover & {\n      display: block;\n      cursor: pointer;\n    }\n    &:hover {\n      opacity: 0.8;\n    }\n  "]);return re=function(){return e},e}function oe(){var e=Object(a.a)(["\n    margin: 0 0 8px 0;\n    position: relative;\n    max-width: 100%;\n    word-wrap: break-word;\n  "]);return oe=function(){return e},e}var ce=G.b.div(oe()),ie=Object(G.b)(z.a)(re(),ce),de=Object(G.b)(z.a)(ae(),ce),le=o.a.memo((function(e){var t=e.text,n=e.id,a=e.index,c=e.listID,i=e.dispatch,d=Object(r.useState)(!1),l=Object(F.a)(d,2),s=l[0],u=l[1],p=Object(r.useState)(""),f=Object(F.a)(p,2),b=f[0],v=f[1],m=function(e){u(!1)},g=function(e){v(e.target.value)},E=function(e){!function(e,t){h.ref("/".concat(e,"/cards/").concat(t)).remove()}(c,n),i(function(e,t){return{type:j.DELETE_CARD,payload:{cardId:t,listID:e}}}(c,n))},x=function(e){e.preventDefault(),function(e,t,n){h.ref("/".concat(t,"/cards/").concat(e)).update({text:n})}(n,c,b),i(function(e,t,n){return{type:j.EDIT_CARD,payload:{cardId:e,listID:t,cardText:n}}}(n,c,b)),u(!1)};return s?o.a.createElement(ne,{text:b,onChange:g,closeForm:m},o.a.createElement(K,{onClick:x},"Save")):o.a.createElement(H.b,{draggableId:String(n),index:a},(function(e){return o.a.createElement(ce,Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{onDoubleClick:function(){return u(!0)}}),o.a.createElement(R.a,null,o.a.createElement(de,{onMouseDown:function(){return u(!0)},fontSize:"small"},"edit"),o.a.createElement(ie,{fontSize:"small",onMouseDown:E},"delete"),o.a.createElement(P.a,null,o.a.createElement(B.a,{gutterBottom:!0},t))))}))})),se=Object(d.b)()(le),ue=function(e){function t(){var e,n;Object(T.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(_.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={formOpen:!1,text:""},n.openForm=function(){n.setState({formOpen:!0})},n.closeForm=function(e){n.setState({formOpen:!1})},n.handleInputChange=function(e){n.setState({text:e.target.value})},n.handleAddList=function(){n.props.dispatch;var e=n.state.text;e&&(n.setState({text:""}),v(e))},n.handleAddCard=function(){var e=n.props,t=(e.dispatch,e.listID),a=(e.cardIndex,n.state.text);if(a){n.setState({text:""});var r=m(t,a);console.log(r),n.props.dispatch(I(t,r))}},n.renderAddButton=function(){var e=n.props.list,t=e?"Add another list":"Add another card",a=e?1:.5,r=e?"white":"inherit",c=e?"rgba(0,0,0,.15)":"inherit";return o.a.createElement("div",{onClick:n.openForm,style:Object(p.a)({},pe.openForButtonGroup,{opacity:a,color:r,backgroundColor:c})},o.a.createElement(z.a,null,"add"),o.a.createElement("p",null,t))},n.renderForm=function(){var e=n.props.list,t=e?"Enter list title...":"Enter a title for this card...",a=e?"Add List":"Add Card";return o.a.createElement("div",null,o.a.createElement(R.a,{style:{overflow:"visible",minHeight:80,minWidth:272,padding:"6px 8px 2px"}},o.a.createElement(W.a,{placeholder:t,autoFocus:!0,onBlur:n.closeForm,value:n.state.text,onChange:n.handleInputChange,style:{resize:"none",width:"100%",overflow:"hidden",outline:"none",border:"none"}})),o.a.createElement("div",{style:pe.formButtonGroup},o.a.createElement(M.a,{onMouseDown:e?n.handleAddList:n.handleAddCard,variant:"contained",style:{color:"white",backgroundColor:"#5aac44"}},a),o.a.createElement(z.a,{style:{marginLeft:8,cursor:"pointer"}},"close")))},n}return Object(k.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return this.state.formOpen?this.renderForm():this.renderAddButton()}}]),t}(o.a.Component),pe={openForButtonGroup:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:3,height:36,width:272,paddingLeft:10},formButtonGroup:{marginTop:8,display:"flex",alignItems:"center"}},fe=Object(d.b)()(ue);function be(){var e=Object(a.a)(["\n    width: 100%;\n    border: none;\n    outline-color: blue;\n    border-radius: 3px;\n    margin-bottom: 3px;\n    padding: 5px;\n"]);return be=function(){return e},e}function he(){var e=Object(a.a)(["\n    transition: background 0.3s ease-in;\n    ",":hover & {\n      background: #ccc;\n    }\n  "]);return he=function(){return e},e}function ve(){var e=Object(a.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    cursor: pointer;\n"]);return ve=function(){return e},e}function me(){var e=Object(a.a)(["\n    cursor: pointer;\n    transition: opacity 0.3s ease-in-out;\n    opacity: 0.4;\n    &:hover {\n      opacity: 0.8;\n    }\n  "]);return me=function(){return e},e}function ge(){var e=Object(a.a)(["\n  background-color: #dfe3e6;\n  border-radius:3px;\n  width: 300px;\n  padding: 8px;\n  margin-right:8px;\n  height:100%;\n  "]);return ge=function(){return e},e}var Ee=G.b.div(ge()),xe=Object(G.b)(z.a)(me()),De=G.b.div(ve()),ye=G.b.h4(he(),De),Oe=G.b.input(be()),Ie=Object(d.b)()((function(e){var t=e.title,n=e.cards,a=e.listID,c=e.index,i=e.dispatch,d=Object(r.useState)(!1),l=Object(F.a)(d,2),s=l[0],u=l[1],p=Object(r.useState)(t),f=Object(F.a)(p,2),b=f[0],v=f[1],m=function(){var e;console.log(a),e=a,h.ref("/".concat(e)).remove()},g=function(e){e.target.select()},E=function(e){e.preventDefault(),v(e.target.value)},x=function(e){u(!1),function(e,t){h.ref("/".concat(e)).update({title:t})}(a,b),i(function(e,t){return{type:j.EDIT_LIST_TITLE,payload:{listID:e,listTitle:t}}}(a,b))};return o.a.createElement(H.b,{draggableId:String(a),index:c},(function(e){return o.a.createElement(Ee,Object.assign({},e.draggableProps,{ref:e.innerRef},e.dragHandleProps),o.a.createElement(H.c,{droppableId:String(a)},(function(e){return o.a.createElement("div",null,o.a.createElement("div",null,s?o.a.createElement("form",{onSubmit:x},o.a.createElement(Oe,{type:"text",value:b,onChange:E,autoFocus:!0,onFocus:g,onBlur:x})):o.a.createElement(De,{onClick:function(){return u(!0)}},o.a.createElement(ye,null,t),o.a.createElement(xe,{onClick:m},"delete"))),o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),n.map((function(e,t){return o.a.createElement(se,{key:e.id,text:e.text,id:e.id,index:t,listID:a})})),e.placeholder,o.a.createElement(fe,{listID:a,cardIndex:n.length})))})))}))}));function je(){var e=Object(a.a)(["\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    border-radius: 3px;\n    height: 36px;\n    margin-left: 8px;\n    width: 300px;\n    padding-left: 10px;\n    padding-right: 10px;\n    opacity: ",";\n    color: ",";\n    background-color: ",";\n  "]);return je=function(){return e},e}var Ae=function(e){var t=e.list,n=e.children,a=e.onClick,r=t?1:.5,c=t?"white":"inherit",i=t?"rgba(0,0,0,.15)":"inherit",d=G.b.div(je(),r,c,i);return o.a.createElement(d,{onClick:a},o.a.createElement(z.a,null,"add"),o.a.createElement("p",{style:{flexShrink:0}},n))};function Se(){var e=Object(a.a)(["\n      display: flex;\n      align-items: center;\n      cursor: pointer;\n      border-radius: 3px;\n      height: 36px;\n      margin-left: 8px;\n      width: 300px;\n      padding-left: 10px;\n      padding-right: 10px;\n      opacity: ",";\n      color: ",";\n      background-color: ",";\n    "]);return Se=function(){return e},e}var Ce=function(e){function t(){var e,n;Object(T.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(_.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={formOpen:!1,text:""},n.openForm=function(){n.setState({formOpen:!0})},n.closeForm=function(e){n.setState({formOpen:!1})},n.handleInputChange=function(e){n.setState({text:e.target.value})},n.handleAddList=function(){n.props.dispatch;var e=n.state.text;e&&(n.setState({text:""}),v(e))},n.handleAddCard=function(){var e=n.props,t=(e.dispatch,e.listID),a=(e.cardIndex,n.state.text);if(a){n.setState({text:""});var r=m(t,a);console.log(r),n.props.dispatch(I(t,r))}},n.renderOpenForm=function(){var e=n.props.list,t=e?"Add another list":"Add another card",a=e?1:.5,r=e?"white":"inherit",c=e?"rgba(0,0,0,.15)":"inherit",i=G.b.div(Se(),a,r,c);return o.a.createElement(i,{onClick:n.openForm},o.a.createElement(z.a,null,"add"),o.a.createElement("p",{style:{flexShrink:0}},t))},n}return Object(k.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.state.text,t=this.props.list;return this.state.formOpen?o.a.createElement(ne,{text:e,onChange:this.handleInputChange,closeForm:this.closeForm},o.a.createElement(K,{onClick:t?this.handleAddList:this.handleAddCard},t?"Add List":"Add Card")):o.a.createElement(Ae,{list:t,onClick:this.openForm},t?"Add another list":"Add another card")}}]),t}(o.a.PureComponent),Te=Object(d.b)()(Ce);function we(){var e=Object(a.a)(["\n  display:flex;\n  flex-direction:row;\n"]);return we=function(){return e},e}var _e=G.b.div(we()),Le=function(e){function t(){var e,n;Object(T.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(_.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t,a,r,o=e.destination,c=e.source,i=e.draggableId,d=e.type;o&&("list"===d?(a=c.index,r=o.index,h.ref("/").once("value",(function(e){var t=e.val(),n=Object.values(t),o=n[a],c=n[r];console.log(o,c),o.cards||(o.cards=[]),c.cards||(c.cards=[]),h.ref("/".concat(o.id)).update({cards:c.cards,title:c.title}),h.ref("/".concat(c.id)).update({cards:o.cards,title:o.title})}))):(t=g(c.droppableId,o.droppableId,c.index,o.index,i),console.log("new card id",t)),n.props.dispatch(O(c.droppableId,o.droppableId,c.index,o.index,i,d,t)))},n}return Object(k.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.lists;return o.a.createElement(H.a,{onDragEnd:this.onDragEnd},o.a.createElement("div",null,o.a.createElement("h2",null,"Trello Board Clone"),o.a.createElement(H.c,{droppableId:"all-lists",direction:"horizontal",type:"list"},(function(t){return o.a.createElement(_e,Object.assign({},t.droppableProps,{ref:t.innerRef}),e.map((function(e,t){return o.a.createElement(Ie,{listID:e.id,key:e.id,title:e.title,cards:e.cards,index:t})})),t.placeholder,o.a.createElement(Te,{list:!0}))}))))}}]),t}(r.Component),ke=Object(d.b)((function(e){return{lists:e.lists}}),(function(e){var t=Object(l.b)({sort:O});return e((function(e){var t=[];E.ref("/").once("value",(function(e){e.forEach((function(e){var n=e.val();if(n.cards){var a=Object.values(n.cards);n.cards=a}else n.cards=[];t.push(n)}))})).then((function(){return e(D(t))}))})),function(e){E.ref("/").on("child_added",(function(t){e(x(t.val()))}))}(e),function(e){E.ref("/").on("child_removed",(function(t){console.log(t.val()),e(y(t.val().id))}))}(e),Object(p.a)({},t,{dispatch:e})}))(Le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(){var e=Object(a.a)(["\n  html {\n    background-color: #854085;\n    box-sizing: border-box;\n    transition: all 0.5s ease-in;\n  }\n"]);return Fe=function(){return e},e}var Re=Object(G.a)(Fe());i.a.render(o.a.createElement(d.a,{store:C},o.a.createElement(Re,null),o.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,t,n){e.exports=n(137)}},[[81,1,2]]]);
//# sourceMappingURL=main.0a6c52ae.chunk.js.map