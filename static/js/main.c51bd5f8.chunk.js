(this["webpackJsonptrello-clone"]=this["webpackJsonptrello-clone"]||[]).push([[0],{137:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),o=n.n(r),c=n(18),i=n.n(c),d=n(11),l=n(12),s=n(39),u=n(23),p=n(26),f=n(55),b=n.n(f);n(100);b.a.initializeApp({apiKey:"AIzaSyBacJ_KKJSLLjgfSicFdtCDNPrPSNM9Pa0",authDomain:"trello-clone-e04bd.firebaseapp.com",databaseURL:"https://trello-clone-e04bd.firebaseio.com",projectId:"trello-clone-e04bd",storageBucket:"trello-clone-e04bd.appspot.com",messagingSenderId:"339754565110",appId:"1:339754565110:web:08f0168aff109bc09e5bd7",measurementId:"G-L5YDB5K7CS"});var h=b.a.database(),v=function(e){var t=Date.now();h.ref("/".concat(t)).set({title:e,id:t,cards:null})},m=function(e,t){var n=Date.now();return h.ref("/".concat(e,"/cards/").concat(n)).set({id:n,text:t}),{id:n,text:t}};var g=function(e,t,n,a,r){var o;return h.ref("/").once("value",(function(r){var c=r.val(),i=(Object.values(c),c[e]),d=c[t];if(i.cards){var l=Object.values(i.cards);i.cards=l}else i.cards=[];if(d.cards){var s=Object.values(d.cards);d.cards=s}else d.cards=[];var u=i.cards[n];h.ref("/".concat(i.id,"/cards/").concat(u.id)).remove(),i.cards.splice(n,1),o=Date.now(),u.id=o,h.ref("/".concat(d.id,"/cards/").concat(o)).set(u),d.cards.push(u);for(var p=a+1;p<d.cards.length;p++)h.ref("/".concat(d.id,"/cards/").concat(d.cards[p].id)).update({text:d.cards[p-1].text}),console.log(d.cards);h.ref("/".concat(d.id,"/cards/").concat(d.cards[a].id)).update({text:u.text})})),o},E=h,x=function(e){return console.log(E),{type:D.ADD_LIST_DATABASE,payload:e}},O=function(e){return{type:D.FETCH_LISTS,payload:e}};var y=function(e){return{type:D.DELETE_LIST,payload:e}},j=function(e,t,n,a,r,o,c){return console.log("heyy"),{type:D.DRAG_HAPPENED,payload:{droppableIdStart:e,droppableIdEnd:t,droppableIndexStart:n,droppableIndexEnd:a,draggableId:r,type:o,newCardId:c}}},I=function(e,t){return{type:D.ADD_CARD,payload:{card:t,listID:e}}},D={ADD_CARD:"ADD_CARD",ADD_LIST_DATABASE:"ADD_LIST_DATABASE",DRAG_HAPPENED:"DRAG_HAPPENED",FETCH_LISTS:"FETCH_LISTS",DELETE_CARD:"DELETE_CARD",DELETE_LIST:"DELETE_LIST",EDIT_LIST_TITLE:"EDIT_LIST_TITLE"},A=("list-".concat(0),"card-".concat(0),"card-".concat(1),"list-".concat(1),"card-".concat(2),"card-".concat(3),"card-".concat(4),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.ADD_CARD:var n={id:t.payload.card.id,text:t.payload.card.text},a=e.map((function(e){return e.id===t.payload.listID?Object(p.a)({},e,{cards:[].concat(Object(u.a)(e.cards),[n])}):e}));return a;case D.DRAG_HAPPENED:var r,o=t.payload,c=o.droppableIdStart,i=o.droppableIdEnd,d=o.droppableIndexStart,l=o.droppableIndexEnd,s=(o.draggableId,o.type),f=Object(u.a)(e);if("list"===s){var b=f.splice(d,1);f.splice.apply(f,[l,0].concat(Object(u.a)(b)));var h=f[d].id;return f[d].id=f[l].id,f[l].id=h,f}for(var v=0;v<e.length;v++)if(e[v].id==c){r=f[v];break}var m,g=r.cards.splice(d,1);(g=g[0]).id=t.payload.newCardId,console.log(g);for(v=0;v<e.length;v++)if(e[v].id==i){m=f[v];break}m.cards.push({id:t.payload.newCardId,text:""});for(v=m.cards.length-1;v>l;v--)m.cards[v].text=m.cards[v-1].text;return m.cards[l].text=g.text,f;case D.FETCH_LISTS:return t.payload;case D.ADD_LIST_DATABASE:var E={title:t.payload.title,cards:[],id:t.payload.id};return[].concat(Object(u.a)(e),[E]);case D.DELETE_CARD:var x,O,y=e.map((function(e,n){return e.id===t.payload.listID&&(O=e,x=n),e}));y.splice(x,1);var j=[];for(v=0;v<O.cards.length;v++)O.cards[v].id!==t.payload.cardId&&j.push(O.cards[v]);var I={title:O.title,id:O.id,cards:j};return y.splice(x,0,I),y;case D.DELETE_LIST:var A,S=e.map((function(e,n){return e.id===t.payload&&(A=n),e}));return S.splice(A,1),console.log(S),S;case D.EDIT_LIST_TITLE:var T=e.map((function(e,n){return e.id===t.payload.listID?Object(p.a)({},e,{title:t.payload.listTitle}):e}));return T;default:return e}}),S=Object(l.c)({lists:A}),T=Object(l.e)(S,Object(l.a)(s.a)),w=n(32),C=n(19),L=n(33),_=n(34),k=n(35),F=n(36),B=n(156),P=n(154),R=n(153),H=n(25),G=n(6),z=n(152);function N(){var e=Object(a.a)(["\n    position: absolute;\n    display:none;\n    right: 5px;\n    bottom: 5px;\n    opacity: 0.5;\n    ",":hover & {\n      display: block;\n      cursor: pointer;\n    }\n    &:hover {\n      opacity: 0.8;\n    }\n  "]);return N=function(){return e},e}function M(){var e=Object(a.a)(["\n    margin: 0 0 8px 0;\n    position: relative;\n    max-width: 100%;\n    word-wrap: break-word;\n  "]);return M=function(){return e},e}var J=G.b.div(M()),K=Object(G.b)(z.a)(N(),J),W=Object(d.b)()((function(e){var t=e.text,n=e.id,a=e.index,c=e.listID,i=e.dispatch,d=Object(r.useState)(!1),l=Object(F.a)(d,2),s=(l[0],l[1],Object(r.useState)(t)),u=Object(F.a)(s,2),p=(u[0],u[1],function(e){!function(e,t){h.ref("/".concat(e,"/cards/").concat(t)).remove()}(c,n),i(function(e,t){return{type:D.DELETE_CARD,payload:{cardId:t,listID:e}}}(c,n))});return o.a.createElement(H.b,{draggableId:String(n),index:a},(function(e){return o.a.createElement(J,Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),o.a.createElement(B.a,null,o.a.createElement(K,{fontSize:"small",onMouseDown:p},"delete"),o.a.createElement(R.a,null,o.a.createElement(P.a,{gutterBottom:!0},t))))}))})),U=n(50),Y=n(155),$=function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={formOpen:!1,text:""},n.openForm=function(){n.setState({formOpen:!0})},n.closeForm=function(e){n.setState({formOpen:!1})},n.handleInputChange=function(e){n.setState({text:e.target.value})},n.handleAddList=function(){n.props.dispatch;var e=n.state.text;e&&(n.setState({text:""}),v(e))},n.handleAddCard=function(){var e=n.props,t=(e.dispatch,e.listID),a=(e.cardIndex,n.state.text);if(a){n.setState({text:""});var r=m(t,a);console.log(r),n.props.dispatch(I(t,r))}},n.renderAddButton=function(){var e=n.props.list,t=e?"Add another list":"Add another card",a=e?1:.5,r=e?"white":"inherit",c=e?"rgba(0,0,0,.15)":"inherit";return o.a.createElement("div",{onClick:n.openForm,style:Object(p.a)({},q.openForButtonGroup,{opacity:a,color:r,backgroundColor:c})},o.a.createElement(z.a,null,"add"),o.a.createElement("p",null,t))},n.renderForm=function(){var e=n.props.list,t=e?"Enter list title...":"Enter a title for this card...",a=e?"Add List":"Add Card";return o.a.createElement("div",null,o.a.createElement(B.a,{style:{overflow:"visible",minHeight:80,minWidth:272,padding:"6px 8px 2px"}},o.a.createElement(U.a,{placeholder:t,autoFocus:!0,onBlur:n.closeForm,value:n.state.text,onChange:n.handleInputChange,style:{resize:"none",width:"100%",overflow:"hidden",outline:"none",border:"none"}})),o.a.createElement("div",{style:q.formButtonGroup},o.a.createElement(Y.a,{onMouseDown:e?n.handleAddList:n.handleAddCard,variant:"contained",style:{color:"white",backgroundColor:"#5aac44"}},a),o.a.createElement(z.a,{style:{marginLeft:8,cursor:"pointer"}},"close")))},n}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return this.state.formOpen?this.renderForm():this.renderAddButton()}}]),t}(o.a.Component),q={openForButtonGroup:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:3,height:36,width:272,paddingLeft:10},formButtonGroup:{marginTop:8,display:"flex",alignItems:"center"}},Q=Object(d.b)()($);function V(){var e=Object(a.a)(["\n    width: 100%;\n    border: none;\n    outline-color: blue;\n    border-radius: 3px;\n    margin-bottom: 3px;\n    padding: 5px;\n"]);return V=function(){return e},e}function X(){var e=Object(a.a)(["\n    transition: background 0.3s ease-in;\n    ",":hover & {\n      background: #ccc;\n    }\n  "]);return X=function(){return e},e}function Z(){var e=Object(a.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    cursor: pointer;\n"]);return Z=function(){return e},e}function ee(){var e=Object(a.a)(["\n    cursor: pointer;\n    transition: opacity 0.3s ease-in-out;\n    opacity: 0.4;\n    &:hover {\n      opacity: 0.8;\n    }\n  "]);return ee=function(){return e},e}function te(){var e=Object(a.a)(["\n  background-color: #dfe3e6;\n  border-radius:3px;\n  width: 300px;\n  padding: 8px;\n  margin-right:8px;\n  height:100%;\n  "]);return te=function(){return e},e}var ne=G.b.div(te()),ae=Object(G.b)(z.a)(ee()),re=G.b.div(Z()),oe=G.b.h4(X(),re),ce=G.b.input(V()),ie=Object(d.b)()((function(e){var t=e.title,n=e.cards,a=e.listID,c=e.index,i=e.dispatch,d=Object(r.useState)(!1),l=Object(F.a)(d,2),s=l[0],u=l[1],p=Object(r.useState)(t),f=Object(F.a)(p,2),b=f[0],v=f[1],m=function(){var e;console.log(a),e=a,h.ref("/".concat(e)).remove()},g=function(e){e.target.select()},E=function(e){e.preventDefault(),v(e.target.value)},x=function(e){u(!1),function(e,t){h.ref("/".concat(e)).update({title:t})}(a,b),i(function(e,t){return{type:D.EDIT_LIST_TITLE,payload:{listID:e,listTitle:t}}}(a,b))};return o.a.createElement(H.b,{draggableId:String(a),index:c},(function(e){return o.a.createElement(ne,Object.assign({},e.draggableProps,{ref:e.innerRef},e.dragHandleProps),o.a.createElement(H.c,{droppableId:String(a)},(function(e){return o.a.createElement("div",null,o.a.createElement("div",null,s?o.a.createElement("form",{onSubmit:x},o.a.createElement(ce,{type:"text",value:b,onChange:E,autoFocus:!0,onFocus:g,onBlur:x})):o.a.createElement(re,{onClick:function(){return u(!0)}},o.a.createElement(oe,null,t),o.a.createElement(ae,{onClick:m},"delete"))),o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),n.map((function(e,t){return o.a.createElement(W,{key:e.id,text:e.text,id:e.id,index:t,listID:a})})),e.placeholder,o.a.createElement(Q,{listID:a,cardIndex:n.length})))})))}))}));function de(){var e=Object(a.a)(["\n  && {\n    color: white;\n    background: #5aac44;\n  }\n"]);return de=function(){return e},e}var le=Object(G.b)(Y.a)(de()),se=function(e){var t=e.children,n=e.onClick;return o.a.createElement(le,{variant:"contained",onMouseDown:n},t)};function ue(){var e=Object(a.a)(["\nmargin-left: 8px;\ncursor: pointer;\n"]);return ue=function(){return e},e}function pe(){var e=Object(a.a)(["\nmargin-top: 8px;\ndisplay: flex;\nalign-items: center;\nmargin-left: 8px;\n"]);return pe=function(){return e},e}function fe(){var e=Object(a.a)(["\nresize: none;\nwidth: 100%;\noverflow: hidden;\noutline: none;\nborder: none;\n"]);return fe=function(){return e},e}function be(){var e=Object(a.a)(["\nmin-height: 85px;\npadding: 6px 8px 2px;\n"]);return be=function(){return e},e}function he(){var e=Object(a.a)(["\nwidth: 284px;\nmargin-bottom: 8px;\n"]);return he=function(){return e},e}var ve=G.b.div(he()),me=Object(G.b)(B.a)(be()),ge=Object(G.b)(U.a)(fe()),Ee=G.b.div(pe()),xe=Object(G.b)(z.a)(ue()),Oe=o.a.memo((function(e){var t=e.list,n=e.text,a=void 0===n?"":n,r=e.onChange,c=e.closeForm,i=e.children,d=t?"Enter list title...":"Enter a title for this card...";return o.a.createElement(ve,null,o.a.createElement(me,null,o.a.createElement(ge,{placeholder:d,autoFocus:!0,value:a,onChange:function(e){return r(e)},onBlur:c})),o.a.createElement(Ee,null,i,o.a.createElement(xe,{onMouseDown:c},"close")))}));function ye(){var e=Object(a.a)(["\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    border-radius: 3px;\n    height: 36px;\n    margin-left: 8px;\n    width: 300px;\n    padding-left: 10px;\n    padding-right: 10px;\n    opacity: ",";\n    color: ",";\n    background-color: ",";\n  "]);return ye=function(){return e},e}var je=function(e){var t=e.list,n=e.children,a=e.onClick,r=t?1:.5,c=t?"white":"inherit",i=t?"rgba(0,0,0,.15)":"inherit",d=G.b.div(ye(),r,c,i);return o.a.createElement(d,{onClick:a},o.a.createElement(z.a,null,"add"),o.a.createElement("p",{style:{flexShrink:0}},n))};function Ie(){var e=Object(a.a)(["\n      display: flex;\n      align-items: center;\n      cursor: pointer;\n      border-radius: 3px;\n      height: 36px;\n      margin-left: 8px;\n      width: 300px;\n      padding-left: 10px;\n      padding-right: 10px;\n      opacity: ",";\n      color: ",";\n      background-color: ",";\n    "]);return Ie=function(){return e},e}var De=function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).state={formOpen:!1,text:""},n.openForm=function(){n.setState({formOpen:!0})},n.closeForm=function(e){n.setState({formOpen:!1})},n.handleInputChange=function(e){n.setState({text:e.target.value})},n.handleAddList=function(){n.props.dispatch;var e=n.state.text;e&&(n.setState({text:""}),v(e))},n.handleAddCard=function(){var e=n.props,t=(e.dispatch,e.listID),a=(e.cardIndex,n.state.text);if(a){n.setState({text:""});var r=m(t,a);console.log(r),n.props.dispatch(I(t,r))}},n.renderOpenForm=function(){var e=n.props.list,t=e?"Add another list":"Add another card",a=e?1:.5,r=e?"white":"inherit",c=e?"rgba(0,0,0,.15)":"inherit",i=G.b.div(Ie(),a,r,c);return o.a.createElement(i,{onClick:n.openForm},o.a.createElement(z.a,null,"add"),o.a.createElement("p",{style:{flexShrink:0}},t))},n}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.state.text,t=this.props.list;return this.state.formOpen?o.a.createElement(Oe,{text:e,onChange:this.handleInputChange,closeForm:this.closeForm},o.a.createElement(se,{onClick:t?this.handleAddList:this.handleAddCard},t?"Add List":"Add Card")):o.a.createElement(je,{list:t,onClick:this.openForm},t?"Add another list":"Add another card")}}]),t}(o.a.PureComponent),Ae=Object(d.b)()(De);function Se(){var e=Object(a.a)(["\n  display:flex;\n  flex-direction:row;\n"]);return Se=function(){return e},e}var Te=G.b.div(Se()),we=function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(L.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).onDragEnd=function(e){var t,a,r,o=e.destination,c=e.source,i=e.draggableId,d=e.type;o&&("list"===d?(a=c.index,r=o.index,h.ref("/").once("value",(function(e){var t=e.val(),n=Object.values(t),o=n[a],c=n[r];console.log(o,c),o.cards||(o.cards=[]),c.cards||(c.cards=[]),h.ref("/".concat(o.id)).update({cards:c.cards,title:c.title}),h.ref("/".concat(c.id)).update({cards:o.cards,title:o.title})}))):(t=g(c.droppableId,o.droppableId,c.index,o.index,i),console.log("new card id",t)),n.props.dispatch(j(c.droppableId,o.droppableId,c.index,o.index,i,d,t)))},n}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props.lists;return o.a.createElement(H.a,{onDragEnd:this.onDragEnd},o.a.createElement("div",null,o.a.createElement("h2",null,"Trello Board Clone"),o.a.createElement(H.c,{droppableId:"all-lists",direction:"horizontal",type:"list"},(function(t){return o.a.createElement(Te,Object.assign({},t.droppableProps,{ref:t.innerRef}),e.map((function(e,t){return o.a.createElement(ie,{listID:e.id,key:e.id,title:e.title,cards:e.cards,index:t})})),t.placeholder,o.a.createElement(Ae,{list:!0}))}))))}}]),t}(r.Component),Ce=Object(d.b)((function(e){return{lists:e.lists}}),(function(e){var t=Object(l.b)({sort:j});return e((function(e){var t=[];E.ref("/").once("value",(function(e){e.forEach((function(e){var n=e.val();if(n.cards){var a=Object.values(n.cards);n.cards=a}else n.cards=[];t.push(n)}))})).then((function(){return e(O(t))}))})),function(e){E.ref("/").on("child_added",(function(t){e(x(t.val()))}))}(e),function(e){E.ref("/").on("child_removed",(function(t){console.log(t.val()),e(y(t.val().id))}))}(e),Object(p.a)({},t,{dispatch:e})}))(we);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Le(){var e=Object(a.a)(["\n  html {\n    background-color: #854085;\n    box-sizing: border-box;\n    transition: all 0.5s ease-in;\n  }\n"]);return Le=function(){return e},e}var _e=Object(G.a)(Le());i.a.render(o.a.createElement(d.a,{store:T},o.a.createElement(_e,null),o.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},81:function(e,t,n){e.exports=n(137)}},[[81,1,2]]]);
//# sourceMappingURL=main.c51bd5f8.chunk.js.map